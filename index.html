<html ng-app="listaTelefonica">
    <head>
        <meta charset="UTF-8"/>
        <title>Lista Telef√¥nica</title>
        <script src="lib/angular.js"></script>
        <script src="lib/angular-messages.js"></script>
        <script src="js/app.js"></script>
        <script src="js/controller/ListaTelefonicaController.js"></script>
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    </head>
    <body>
        <div ng-controller="listaTelefonicaController">
            <center><h2>{{titulo}}</h2></center>
            <input class="form-control" type="text" placeholder="Digite o contato desejado" ng-model="criterioDeBusca"/>
            <table class="table table-striped">
                <thead class="thead-inverse">
                    <tr>
                        <th></th>
                        <th><a href="" ng-click="ordenarPor('name')">Nome</a></th>
                        <th><a href="" ng-click="ordenarPor('phone')">Telefone</a></th>
                        <th><a href="" ng-click="ordenarPor('operator')">Operadora</a></th>
                    </tr>
                </thead>
                <tr ng-repeat="contato in contatos | filter:{name: criterioDeBusca} | orderBy:criterioOrdenacao:direcaoOrdenacao">
                    <td><input type="checkbox" ng-model="contato.selecionado"/></td>
                    <td>{{contato.name}}</td>
                    <td>{{contato.phone}}</td>
                    <td>{{contato.operator}}</td>
                </tr>
            </table>
            <form name="contatoForm">
                <input class="form-control" placeholder="Nome" type="text" ng-model="contato.name" name="nome" ng-required="true" ng-minlength="3"/>
                <input class="form-control" placeholder="Telefone" type="text" ng-model="contato.phone" name="telefone" ng-required="true" ng-pattern="/^\d{4,5}-\d{4}$/"/>
                <select class="form-control" ng-model="contato.operator" ng-options="operadora.id as operadora.name for operadora in operadoras">
                    <option value="">Selecione uma operadora</option>
                </select>
                <div class="alert alert-warning" ng-messages="contatoForm.nome.$error" ng-if='contatoForm.nome.$dirty'>
                        <div ng-message="required">
                            Preencha o nome
                        </div>
                        <div ng-message="minlength">
                            O tamanho do nome deve possuir ao menos 3 caracteres
                        </div>
                    </div>
                    <div class="alert alert-warning" ng-messages="contatoForm.telefone.$error" ng-if='contatoForm.telefone.$dirty'>
                        <div ng-message="required">
                            Preencha o telefone
                        </div>
                        <div ng-message="pattern">
                                O campo deve ter o formato DDDDD-DDDD
                        </div>
                </div>
                <center>
                <input type="button" class="btn btn-primary"  ng-click="adicionarContato(contato)" ng-disabled="contatoForm.$invalid" value="Salvar"/>
                <input type="button" class="btn btn-danger" ng-click="removerContato(isSelecionado(contatos))" ng-disabled="!isSelecionado(contatos)" value="Apagar contato"/>
                </center>

            </form>
        </div>
    </body>
</html>
